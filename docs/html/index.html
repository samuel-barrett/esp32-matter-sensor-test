<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP32 Matter Sensor Test: ESP32 Matter Temperature and Illumination Sensor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP32 Matter Sensor Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ESP32 <a class="el" href="struct_matter.html" title="Holds information related to the scd30 as matter attribute values.">Matter</a> Temperature and Illumination Sensor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Introduction</h1>
<p>This code demonstrates an IoT sensor setup for measuring temperature and illumination (lux) using the <a class="el" href="struct_matter.html" title="Holds information related to the scd30 as matter attribute values.">Matter</a> standard. It uses the <a class="el" href="struct_matter.html" title="Holds information related to the scd30 as matter attribute values.">Matter</a> protocol,</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Tested Hardware</h1>
<ul>
<li>Adafruit ESP32 Feather microcontroller</li>
<li>BMP280 Temperature and Pressure Sensor (connected using the I2C protocol)</li>
<li>BH1750 Light Sensor (connected using the I2C protocol)</li>
<li><a class="el" href="struct_matter.html" title="Holds information related to the scd30 as matter attribute values.">Matter</a> hub (Apple TV 4k 3rd Gen with Ethernet)</li>
<li>iPhone with the Apple Home App installed</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Software</h1>
<ul>
<li>ESP-IDF: Espressif's official IoT Development Framework<ul>
<li>See <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/index.html">https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/index.html</a></li>
</ul>
</li>
<li>ESP-MATTER: Espressif's official SDK for <a class="el" href="struct_matter.html" title="Holds information related to the scd30 as matter attribute values.">Matter</a> applications<ul>
<li>Uses a modified repository which includes functions for light and pressure readings</li>
<li>See <a href="https://github.com/samuel-barrett/esp-matter">https://github.com/samuel-barrett/esp-matter</a></li>
</ul>
</li>
<li>ESP-IDF-LIB:<ul>
<li>See <a href="https://esp-idf-lib.readthedocs.io/en/latest">https://esp-idf-lib.readthedocs.io/en/latest</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Purpose</h1>
<p>The purpose of this code is to provide a sample implementation of a temperature and illumination IoT sensor setup using the <a class="el" href="struct_matter.html" title="Holds information related to the scd30 as matter attribute values.">Matter</a> standard. The code can be used as a starting point for building similar IoT sensor applications.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Installation (on M1 Mac)</h1>
<h2><a class="anchor" id="autotoc_md6"></a>
Step 1: Clone repository</h2>
<ul>
<li>Install git lf <pre class="fragment">brew install git-lfs 
</pre></li>
<li>Clone the ESP-MATTER repository, using the following command: <pre class="fragment">$ git clone --recursive https://github.com/samuel-barrett/esp-matter.git
</pre><ul>
<li>If you alerady have ESP-MATTER installed, you can do a shallow clone</li>
<li>If you want to preserve your current esp-matter repository, you can copy the contents first <pre class="fragment">$ cp -rH [PATH TO ESP-MATTER]/esp-matter [SOME PATH]/esp-matter-fork
</pre></li>
<li>Then do a shallow clone <pre class="fragment">$ cd [ESP-MATTER Repository to modify]
$ git clone https://github.com/samuel-barrett/esp32_matter_sensor_test.git
</pre></li>
<li>Then change directories to the repository you want to change to fork it to <a href="https://github.com/samuel-barrett/esp-matter.git">https://github.com/samuel-barrett/esp-matter.git</a> <pre class="fragment">$ git remote set-url origin https://github.com/samuel-barrett/esp-matter.git
$ git pull
</pre></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Step 3: Install and Configure the ESP-IDF and VSCode Extension</h2>
<ul>
<li>Install Visual Studio Code if not installed</li>
<li>Install and configure the etension named "Espressif IDF" by following the instructions provided <a href="https://github.com/espressif/vscode-esp-idf-extension/blob/master/docs/tutorial/install.md">here</a><ul>
<li>Note: If you have done a recursive clone then, the esp-idf repository is already downloaded, and you can select it during setup</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Step 4: Configure VS Extension to for project repository</h2>
<ul>
<li>Open the esp32-matter-sensor-test folder in visual studio code</li>
<li>Type [CMD]+[SHIFT]+[P], then type <pre class="fragment">&gt;ESP-IDF: Install ESP-Matter
</pre></li>
<li>Select "Yes, download all submodules" -&gt; "Use existing repository"<ul>
<li>Select the forked repository from the previous step</li>
</ul>
</li>
<li>Type [CMD]+[SHIFT]+[P], then type <pre class="fragment">&gt;ESP-IDF: Build your project
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Step 5: Configure hardware</h2>
<ul>
<li>Connect the BMP280, and BH1750 sensors to the microcontroller according to the i2C protocol</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
Step 6: Build flash and monitor</h2>
<ul>
<li>Build and flash the code to the ESP32 microcontroller using the ESP-IDF tools. Type [CMD]+[SHIFT]+[P], then <pre class="fragment">&gt;ESP-IDF: Build, Flash and start a monitor on your device
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
Step 7: Connect device via QR code</h2>
<p>TODO: Find out how to get QR code</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Limitations</h1>
<p>The code has been tested with the specified hardware and software, and is known to work correctly. However, it is possible that there may be some limitations or compatibility issues with other hardware or software.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Future Work</h1>
<p>The code is currently a basic implementation of the temperature and illumination sensor setup, and there is potential for future updates and improvements, such as:</p>
<p>Adding more sensors or endpoints Improving the logging and data storage functionality Adding support for remote management and control</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Conclusion</h1>
<p>The ESP32 <a class="el" href="struct_matter.html" title="Holds information related to the scd30 as matter attribute values.">Matter</a> Temperature and Illumination Sensor code provides a simple and effective way to set up an IoT sensor for measuring temperature and illumination. It is a great starting point for building similar IoT applications, and has the potential for future updates and improvements. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
